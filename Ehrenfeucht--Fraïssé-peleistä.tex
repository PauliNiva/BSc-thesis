% --- Template for thesis / report with tktltiki2 class ---
% 
% last updated 2013/02/15 for tkltiki2 v1.02

\documentclass[finnish]{tktltiki2}

% tktltiki2 automatically loads babel, so you can simply
% give the language parameter (e.g. finnish, swedish, english, british) as
% a parameter for the class: \documentclass[finnish]{tktltiki2}.
% The information on title and abstract is generated automatically depending on
% the language, see below if you need to change any of these manually.
% 
% Class options:
% - grading                 -- Print labels for grading information on the front page.
% - disablelastpagecounter  -- Disables the automatic generation of page number information
%                              in the abstract. See also \numberofpagesinformation{} command below.
%
% The class also respects the following options of article class:
%   10pt, 11pt, 12pt, final, draft, oneside, twoside,
%   openright, openany, onecolumn, twocolumn, leqno, fleqn
%
% The default font size is 11pt. The paper size used is A4, other sizes are not supported.
%
% rubber: module pdftex

% --- General packages ---

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{amsfonts,amsmath,amssymb,amsthm,booktabs,color,enumitem,graphicx}
\usepackage[pdftex,hidelinks]{hyperref}

% Automatically set the PDF metadata fields
\makeatletter
\AtBeginDocument{\hypersetup{pdftitle = {\@title}, pdfauthor = {\@author}}}
\makeatother

% --- Language-related settings ---
%
% these should be modified according to your language

% babelbib for non-english bibliography using bibtex
\usepackage[fixlanguage]{babelbib}
\selectbiblanguage{finnish}

% add bibliography to the table of contents
\usepackage[nottoc]{tocbibind}
% tocbibind renames the bibliography, use the following to change it back
\settocbibname{Lähteet}

% --- Theorem environment definitions ---

\newtheorem{lau}{Lause}
\newtheorem{lem}[lau]{Lemma}
\newtheorem{kor}[lau]{Korollaari}

\theoremstyle{definition}
\newtheorem{maar}[lau]{Määritelmä}
\newtheorem{ong}{Ongelma}
\newtheorem{alg}[lau]{Algoritmi}
\newtheorem{esim}[lau]{Esimerkki}

\theoremstyle{remark}
\newtheorem*{huom}{Huomautus}

\newenvironment{tod}{\paragraph{Todistus:}}{\hfill$\square$}

% --- tktltiki2 options ---
%
% The following commands define the information used to generate title and
% abstract pages. The following entries should be always specified:

\title{Ehrenfeucht--Fraïssé-peleistä}
\author{Pauli Niva}
\date{\today}
\level{Kandidaatintutkielma}
\abstract{Tämä kirjallisuuskatsaus esittelee Ehrenfeucht--Fraïssé-pelin, sen ominaisuuksia sekä sitä, miten ja missä sitä käytetään. Ehrenfeucht--Fraïssé-peli on malliteorian työkalu, jonka avulla voidaan määritellä, toteuttavatko kaksi matemaattista rakennelmaa samat predikaattilogiikan lauseet eli ovatko rakennelmat elementaarisesti ekvivalentit. Malliteoria on matemaattisen logiikan ja laskettavuuden teorian osa-alue, joka tutkii matemaattisia rakennelmia. Näitä rakennelmia kutsutaan myös struktuureiksi tai malleiksi. Malli koostuu perusjoukosta ja tämän alkioiden välisiä suhteita kuvaavista relaatioista ja funktioista.

Ehrenfeucht--Fraïssé-pelin ovat kehittäneet 1900-luvun puolivälissä ranskalainen loogikko Roland Fraïssé ja puolanamerikkalainen matemaatikko ja tietojenkäsittelytieteilijä Andrzej Ehrenfeucht. Pelin pääsovellusalue on todistuksissa, joissa osoitetaan, että jokin määrätty mallin ominaisuus ei ole ilmaistavissa predikaattilogiikan kielellä. Ehrenfeucht--Fraïssé-pelistä on kehitetty monia variaatioita eri tarpeisiin ja eri logiikoille.

Ehrenfeucht--Fraïssé pelit ovat erityisen tärkeitä äärellisten mallien teoriassa ja sen sovelluksissa tietojenkäsittelytieteessä, koska Ehrenfeucht--Fraïssé-pelit ovat yksi harvoista malliteorian tekniikoista jotka toimivat kun rajoitutaan äärettömästä äärelliseen. Monet muut yleisesti käytetyt tekniikat, kuten kompaktiusteoreema, eivät toimi äärellisillä malleilla.

Ehfenfeucht--Fraïssé-peliä pelataan kahden pelaajan kesken kahdella mallilla. Toinen pelaajista pyrkii osoittamaan, että mallit ovat erilaiset. Toinen taas pyrkii osoittamaan, että mallit ovat elementaarisesti ekvivalentit. Peliä pelataan kierroksittain ja kierroksia on ennalta sovittu määrä.

Kierroksen kulku on seuraavanlainen: Ensin pelaaja joka pyrkii osoittamaan mallit erilaisiksi valitsee malleista toisen ja jonkin alkion sieltä. Tämän jälkeen toinen pelaaja valitsee sillä kierroksella valitsematta jääneestä mallista alkion. Toisena valitsevan pelaajan tarkoituksena on valita sellainen alkio joka on ominaisuuksiltaan samanlainen kuin ensimmäisenä valitsevan pelaajan valitsema alkio. Toisena valintansa tekevä pelaaja voittaa pelin jos viimeisen kierroksen jälkeen kaikkien eri malleista  valittujen alkioiden välillä on olemassa osittaisisomorfia.}

% The following can be used to specify keywords and classification of the paper:

\keywords{Ehrenfeucht--Fraïssé-peli, äärellisten mallien teoria}

% classification according to ACM Computing Classification System (http://www.acm.org/about/class/)
% This is probably mostly relevant for computer scientists
% uncomment the following; contents of \classification will be printed under the abstract with a title
% "ACM Computing Classification System (CCS):"
\classification{Theory of computation $\rightarrow$ Finite Model Theory}

% If the automatic page number counting is not working as desired in your case,
% uncomment the following to manually set the number of pages displayed in the abstract page:
%
% \numberofpagesinformation{16 sivua + 10 sivua liitteissä}
%
% If you are not a computer scientist, you will want to uncomment the following by hand and specify
% your department, faculty and subject by hand:
%
% \faculty{Matemaattis-luonnontieteellinen}
% \department{Tietojenkäsittelytieteen laitos}
% \subject{Tietojenkäsittelytiede}
%
% If you are not from the University of Helsinki, then you will most likely want to set these also:
%
% \university{Helsingin Yliopisto}
% \universitylong{HELSINGIN YLIOPISTO --- HELSINGFORS UNIVERSITET --- UNIVERSITY OF HELSINKI} % displayed on the top of the abstract page
% \city{Helsinki}
%

\usepackage{mathtools}
\usepackage {tikz}
\usetikzlibrary {positioning}
%\usepackage {xcolor}
\definecolor {processblue}{cmyk}{0.96,0,0,0}

\begin{document}

% --- Front matter ---

\frontmatter      % roman page numbering for front matter

\maketitle        % title page
\makeabstract     % abstract page

\tableofcontents  % table of contents

% --- Main matter ---

\mainmatter       % clear page, start arabic page numbering

\section{Johdanto}
%Vuonna 1713 James Waldegrave kävi ensimmäisen tunnetun peliteoreettisen keskustelun
%kirjoittamassaan kirjeessä. Kirjeessään hän esittää minmax-strategia ratkaisun le Her -korttipelin kahden pelaajan versioon. Kuitenkin vasta Antoine Augustin Courtnot esitteli ensimmäisen yleisen peliteoreettisen analyysin vuonna 1838. Tässä työssään hän tarkastelee duopolia ja esittelee ratkaisun, joka on rajoitettu versio Nash-tasapainosta.

%Peliteorian katsotaan yleisesti kuitenkin syntyneen omana alanaan kun John von Neumann julkaisi vuonna 1928 sarjan artikkeleita. Von Neumannin työ peliteorian saralla kulminoitui vuonna 1944 kirjaan \textit{Theory of Games and Economic Behavior}, jonka hän kirjoitti yhdessä Oscar Morgensternin kanssa. Kirjassa esitellään menetelmä optimaalisen ratkaisun löytämiseksi kahden henkilön nollasummapeleissä. Logiikkaan pelit ilmestyivät 1950 -luvulla, kun Leon Henkin ehdotti pelien käyttöä antamaan äärettömille kielille semantiikoita.
Tässä tutkielmassa tarkastellaan Ehrenfeucht--Fraïssé-pelejä, joita sovelletaan logiikan määrittelemättömyystulosten todistamisessa ja tietojenkäsittelytieteessä esimerkiksi tietokantakielien ilmaisuvoiman mittaamisessa tai verkkojen tutkimisessa. Alunperin Ehrenfeucht--Fraïssé-peli määriteltiin ensimmäisen kertaluvun predikaattilogiikalle, mutta tästä pelistä kehitettiin nopeasti erilaisia variaatioita monille muille logiikoille, kuten esimerkiksi kiintopistelogiikalle (fixpoint logic) \cite{Bos93} ja lineaariselle temporaalilogiikalle (linear temporal logic) \cite{Ete96}.

Ensimmäisen kerran \textit{elementaarinen ekvivalenssi} eli se, että täsmälleen samat ensimmäisen kertaluokan lauseet ovat tosia $A$:ssa ja $B$:ssä, esiintyy kirjallisuudessa Alfred Tarskin artikkelissa Grundzüge der Systemenkalküls 1 vuodelta 1935 \cite{Tar35}. Roland Fraïssé käytti väitöskirjatyössään \cite{Fra54} vuonna 1954 \textit{edestakaisin-menetelmää} osoittaakseen, että kaksi \textit{malliteoreettista struktuuria} ovat elementaarisesti ekvivalentit. Andrzej Ehrenfeucht muokkasi tästä Fraïssén menetelmästä peliteoreettisen version, joka julkaistiin vuonna 1961 Fundamenta Mathematicae:ssa \cite{Ehr61}. Nykyisin nämä pelit tunnetaan nimeltä \textit{Ehrenfeucht--Fraïssé-pelit} (jatkossa EF-pelit), joskus niitä kutsutaan myös edestakaisin-peleiksi.

Tämä edestakaisin-menetelmä siis karakterisoi elementaarisen ekvivalenssin. Ideana on, että \textit{isomorfismeja} tutkitaan yksi kerrallaan ja katsotaan, kuinka niitä voisi laajentaa suuremmille äärellisille isomorfismeille.

Tämän tutkielman tavoitteena on esitellä täsmällisesti, mutta kuitenkin samalla havainnollisesti EF-peliä ja sen hyödyllisyyttä matemaattisen logiikan ja tietojenkäsittelytieteen saralla. Tässä työssä esitellään joitain logiikan peruskäsitteitä, mutta työn seuraaminen edellyttää kuitenkin lukijalta yliopistotasoisen matematiikan perusteiden hallintaa ja joitain logiikan peruskäsitteiden tuntemista. Lukijan oletetaan esimerkiksi tuntevan joukon ja kuvauksien käsitteet.

Luvussa kaksi esitellään lyhyesti peruskäsitteistö, kuten relaatiot, isomorfian, kielet ja mallit. Kolmannessa luvussa esittelen itse EF-pelin, sen kulun ja voittokriteerit ja -strategian, sekä todistetaan että toisen pelaajan voittostrategian avulla saadaan mallit jaettua \textit{ekvivalenssiluokkiin}. Lisäksi kolmannessa luvussa havainnollistetaan esimerkkin avulla miten peliä pelataan ja esitellään voittava samalla voittostrategia toiselle pelaajalle kyseisessä pelissä. Neljännessä kappaleessa esitellään EF-pelin sovellusaloja ja muutamia konkreettisia esimerkkejä siitä miten EF-peliä sovelletaan.

\section{Peruskäsitteitä}
Tässä luvussa esitellään joitakin \textit{ensimmäisen kertaluvun predikaattilogiikan} peruskäsitteitä. Alaluku $2.1$ käsittelee relaatioita. Alaluvussa $2.2$ määritellään kieli ja sen alakäsitteet aakkosto, termit ja atomikaavat. Alaluvussa $2.3$ puolestaan määritellään mallin sekä alimallin käsitteet. $2.4$ keskittyy isomorfiaan ja osittaisisomorfiaan. Lisäksi kappaleessa esitellään Tarskin totuusmääritelmä. Alaluvussa $2.5$ määritellään elementaarinen ekvivalenssi ja tuodaan esiin isomorfian ja elementaarisen ekvivalenssin keskinäistä suhdetta. Peruskäsitteiden määrittelyssä seuraan karkeasti Wilfrid Hodgesia \cite{Hod97}.

\subsection{Relaatiot}
Olkoon $X$ jokin joukko. Joukon $X$ $n$\textit{-kertainen karteesinen tulo} tarkoittaa kaikkien joukon $X$ alkioiden $n$-pituisten jonojen joukkoa. Tätä merkitään $X^n$ tai vaihtoehtoisesti $X \times X \times \ldots \times X$, $n$ kertaa. Esimerkiksi joukko $\mathbb{R}^2$ on järjestettyjen reaalilukuparien joukko. Sen geometrinen vastine on taso. $\mathbb{R}^3$ on järjestettyjen reaalilukukolmikoiden joukko. Sen geometrinen vastine on kolmiulotteinen avaruus. 

\begin{maar}
Joukon $X$ \textit{kaksipaikkainen relaatio} $R$ on mikä tahansa joukko joukon $X$ alkioista muodostettuja pareja $(x, y)$, joiden molemmat alkiot ovat joukossa $X$, eli $R \subset X^2$.  Jos $(x, y) \in R$, sanotaan, että $x$ on $y$:n kanssa \textit{relaatiossa} $R$. Joukon $X$ kaksipaikkainen relaatio $R$ on:
\begin{itemize}
\item \textit{refleksiivinen}, jos $(x, x) \in R$, kaikilla $x \in X$
\item \textit{irrefleksiivinen}, jos $(x, x) \notin R$, kaikilla $x \in X$
\item \textit{symmetrinen}, jos $(x, y) \in R$, aina kun $(y, x) \in R$
\item \textit{antisymmetrinen}, aina kun seuraava ehto toteutuu: jos $(x, y) \in R$ ja $(y, x) \in R$, niin $x = y$
\item \textit{transitiivinen}, aina kun seuraava ehto toteutuu: jos $(x, y) \in R$ ja $(y, z) \in R$, niin $(x, z) \in R$
\item \textit{vertailullinen}, jos $(x, y) \in R$ tai $(y, x) \in R$, kaikilla $x, y \in X$, $x \neq y$
\end{itemize}
\end{maar}

\subsection{Kielet}
Tässä alaluvussa määritellään aakkosto, termit, atomikaavat sekä ensimmäisen kertaluvun predikaattilogiikan kieli. Tarkemmin sanottuna, ei ole olemassa vain yhtä predikaattilogiikan kieltä, vaan jokaista aakkostoa kohden on oma kielensä, jolla voidaan puhua sen aakkoston malleista.

\begin{maar}[Aakkosto]
Olkoon $l, m$ ja $n$ kardinaalilukuja. \textit{Aakkosto} on joukko $L = \{R_i \mid i < l\} \cup \{c_i \mid i < m\} \cup \{f_i \mid i < n\}$ joka sisältää $l$ relaatiosymbolia $R_i$, $m$ vakiosymbolia $c_i$ ja $n$ funktiosymbolia $f_i$
\end{maar}
Jokaiseen relaatioon $R$ liittyy \textit{paikkaluku} $\#R$, ilmaisemaan kuinka monipaikkainen kyseinen relaatio on. Samoin jokaiseen funktioon liittyy paikkaluku $\#f$ ilmaisemaan kuinka monipaikkainen funktio on kyseessä. Jos jokin kardinaaliluvuista on $0$, niin tällöin tätä vastaavia symboleja ei ole aakkostossa.

\begin{maar}[Termit]
Olkoon $R$ joukko relaatioita, $C$ joukko vakioita ja $F$ joukko funktioita jotka muodostavat aakkoston $L$. Olkoon $X$ joukko muuttujia. \textit{Termien} joukko $T$ yli aakkoston $L$ on joukko äärellisiä merkkijonoja joka määritellään seuraavasti:
\begin{itemize}
\item Jos $x \in X$, niin $x \in T$.
\item Jos $c \in C$, niin $c \in T$.
\item Jos $f \in F$, $\#f = n$, $n\in \mathbb{Z}_+$ ja $t_1, \ldots, t_n \in T$, niin $f(t_1, \ldots, t_n) \in T$.
\end{itemize}
\end{maar}

\begin{maar}[Atomikaavat]
Olkoon $R$ joukko relaatioita, $C$ joukko vakioita ja $F$ joukko funktioita jotka muodostavat aakkoston $L$. Olkoon $T$ termien joukko yli aakkoston $L$. \textit{Atomikaavojen} joukko $A$ on joukko äärellisiä merkkijonoja joka määritellään seuraavasti:
\begin{itemize}
\item Jos $s, t \in T$, niin $s = t \in A$. Toisin sanoen $s = t$ on atomikaava.
\item Jos $r \in R$, $\#r = n$, $n\in \mathbb{Z}_+$ ja $t_1, \ldots, t_n \in T$, niin $r(t_1, \ldots, t_n) \in A$.
\end{itemize}
\end{maar}

\begin{maar}[Kieli]
Olkoon $A$ atomikaavojen joukko ja olkoon $X$ muuttujien joukko. \textit{Kieli} $K$ yli aakkoston $L$ on kokoelma merkkijonoja jotka muodostetaan rekursiivisesti atomikaavoista seuraavanlaisesti:
\begin{itemize}
\item Kaikki atomikaavat kuuluvat kieleen $K$, $A \subset K$.
\item Jos $\psi$ ja $\varphi \in K$, niin $\neg \varphi \in K$, $(\psi \lor \varphi) \in K$, $(\psi \land \varphi) \in K$, $(\psi \to \varphi) \in K$, sekä $(\psi \leftrightarrow \varphi) \in K$.
\item Jos $\varphi \in K$ ja $x \in X$, niin $\forall x(\varphi) \in K$ ja $\exists x(\varphi) \in K$
\end{itemize}
\end{maar}
Kieli $K$ on \textit{ensimmäisen kertaluvun predikaattilogiikan} kieli, joka sisältää merkkijonoja. Näitä merkkijonoja kutsutaan usein kirjallisuudessa myös kaavoiksi. Kaavojen \textit{alikaavoja} ovat kaikki kaavan osat jotka itsekin ovat kaavoja. 

\subsection{Mallit}
Tässä alaluvussa määritellään, mikä on \textit{malli} eli \textit{struktuuri}. Karkeasti ottaen se on joukko, jolla on jonkinlainen rakenne ja joka koostuu relaatioista, vakioista ja funktioista. Malli ja struktuuri ovat synonyymeja. Näitä kahta sanaa käytetään rinnakkain konteksista riippuen sen mukaan kumpi soveltuu kyseiseen tilanteeseen. Sanaa malli käytetään yleensä tällaisessa kontekstissa ``Olkoon $M$ malli kaavalle $\varphi$'', joka tarkoittaa samaa kuin ``Olkoon M struktuuri siten että $M \models \varphi$'' Nämä konseptit määritellään myöhemmin tässä kappaleessa.

\begin{maar}[Malli] Olkoon $L$ aakkosto ja olkoon $M$ epätyhjä joukko. Tällöin $L$\textit{-malli} koostuu seuraavista:
\begin{itemize}
\item Joukosta $M$.
\item Relaatioista $R^M \subset M$, jokaiselle relaatiosymbolille $R \in L$, $\#R = n$, jossa $n\in \mathbb{Z}_+$.
\item Vakioista $c^M \in M$, jokaiselle vakiosymbolille $c \in L$.
\item Funktioista $f^M: M^m \rightarrow M$, jokaiselle funktiosymbolille $f \in L$, $\#f = m$, jossa $m\in \mathbb{Z}_+$.
\end{itemize}

Relaatiota $R^M$ sanotaan relaatiosymbolin $R$ \textit{tulkinnaksi mallissa} $M$, funktiota $f^M$ sanotaan funktiosymbolin $f$ \textit{tulkinnaksi mallissa} $M$, ja alkiota $c^M$ kutsutaan vakiosymbolin $c$ \textit{tulkinnaksi mallissa} $M$.
\end{maar}

Malli siis antaa aakkoston $L$ symboleille \textit{semantiikan} eli merkityksen sekä kontekstin, jossa formaalin kielen lauseet voivat olla tosia tai epätosia. Samaa merkintää $M$ käytetään sekä mallista kokonaisuutena että mallin \textit{universumista} eli mallin alkioiden joukosta.

Relaatiosymbolin $R$ ja sen tulkinnan $R^M$ välistä eroa voidaan havainnollistaa esimerkiksi sanan ``tietokone'' ja tietokoneen välisellä erolla. Sana ``tietokone'' on suomen kieltä, joka koostuu yhdeksästä merkistä ja sitä voidaan käyttää muodostettaessa suomenkielisiä lauseita. Tietokone taas on fyysinen laite, joka käsittelee tietoa ohjelmointinsa mukaisesti, eikä sitä voida käyttää suomen kielen lauseiden osana. Lause ``Tietokoneeni on Mac'' on totta tai epätotta, riippuen siitä, mihin nimenomaiseen tietokoneeseen sana ``tietokone'' viittaa.

\begin{maar}[Alimalli]
Oletaan, että $A$ on $L$-malli. $A$:n \textit{alimalli} $B$ on $L$-malli, jolle pätee
\begin{itemize}
\item $B \subset A$
\item jos $R \in L$ on relaatiosymboli ja $\#R = n \in \mathbb{Z}_+$, niin tällöin $R^B = R^A \cap B^n$
\item jos $c \in L$ on vakiosymboli, niin tällöin $c^B = c^A$ ja $c^b \in B$
\item jos $f \in L$ on funktiosymboli ja $\#f = n \in \mathbb{Z}_+$, niin tällöin $f^A(B^n) \subset B$ ja $f^B = f^A \restriction B^n$ eli $f^B$ on $f^A$:n rajoittuma osajoukkoon $B^n$. Siis $B$ on suljettu $f^A$:n suhteen.
\end{itemize}
\end{maar}

Olkoon $A$ malli ja $B \subset A$. Tällöin $\langle B \rangle$ on pienin $A$:n alimalli, joka sisältää joukon $B$. 

\subsection{Isomorfia}
Mallien kohdalla puhuttiin ``jonkinlaisesta rakenteesta'', eli struktuurista. Mallin objekteille annettiin nimiä, symboleja ja kaavoja, jotta tätä rakennetta voitiin kuvailla. Malleja joiden rakenne on samanlainen kutsutaan isomorfisiksi.

\begin{maar}[Isomorfismi]
Oletetaan, että $L$ on aakkosto ja $A$ sekä $B$ ovat $L$-malleja. Kuvaus $g: A \rightarrow B$ on \textit{isomorfismi} mallista $A$ mallille $B$, jos
\begin{itemize}
\item $g$ on bijektio.
\item Jokaisella vakiosymbolilla $c \in L$ pätee $g(c^A) = c^B$.
\item Jokaisella relaatiosymbollilla $R \in L, \#R = n$ pätee $(a_1, \ldots, a_n) \in R^A \Longleftrightarrow (g(a_1), \ldots, g(a_n)) \in R^B$.
\item Jokaisella funktiosymbolilla $f \in L, \#f = m$ pätee $g(f^A(a_1, \ldots, a_m)) = f^B(g(a_1), \ldots, g(a_m))$.
\end{itemize}
Jos on olemassa isomorfinen kuvaus $A \rightarrow B$, niin sanotaan, että $A$ ja $B$ ovat isomorfiset ja tätä merkitään $A \cong B$.
\end{maar}

Isomorfia mallien välillä on refleksiivinen, symmetrinen ja transitiivinen. Jotta mallien välillä voi olla isomorfia, niin mallien täytyy olla saman kokoiset, sillä muuten niiden välillä ei voi olla bijektiota, eikä siten isomorfiaakaan. EF-pelien kannalta tärkeä isomorfian ominaisuus on, että se säilyttää totuuden.

\begin{maar}[Osittaisisomorfismi]
Olkoon $L$ aakkosto sekä olkoon $A$ ja $B$ kummatkin $L$-malleja. Olkoon $A' \subset A$ ja $B' \subset B$. Lisäksi olkoon $f: A' \rightarrow B'$. Jos on olemassa isomorfismi $g: \langle A' \rangle \rightarrow \langle B' \rangle$, siten että $g \restriction A' = f$ eli kuvaus $g$ on kuvauksen $f$ rajoittuma osajoukkoon $A'$. Tällöin kuvausta $f$ kutsutaan \textit{osittaisisomorfismiksi} $A \rightarrow B$ ja tätä merkitään $A \cong_p B$.
\end{maar}

Toisin kuin isomorfismissa, osittaisisomorfismissa totuus ei välttämättä säily. Joissain tilanteissa osittaisisomorfismi kuitenkin säilyttää totuuden. Erityisesti näin on \textit{relationaalisten} aakkostojen, eli aakkostojen jotka sisältävät vain relaatiosymboleja ja vakioita, tapauksessa.

Edellä puhuttiin paljon totuudesta ja määritellään seuraavaksi mitä sillä tarkalleen ottaen tarkoitetaan.

\begin{maar}[Tarski]
Oletetaan, että $A$ on $L$-malli ja olkoon $L$ aakkosto ja $K$ kieli. Määritellään rekursiivisesti että kielen $K$ kaava $\varphi$ on totta $A$:ssa, eli $A$ toteuttaa $\varphi$, eli $A \models \varphi$ seuraavasti:
\begin{itemize}
\item Jos $\varphi$ on kaava $s = t$ jossa $s$ ja $t$ ovat termejä, niin $A \models \varphi$ jos ja vain jos $s^A = t^A$.
\item Jos $\varphi$ on kaava $R(t_1, \ldots, t_n)$, missä $R$ on $n$-paikkainen relaatiosymboli ja $t_1, \ldots, t_n$ ovat termejä, niin $A \models \varphi$ jos ja vain jos $(t_1^A, \ldots, t_n^A) \in R$.
\item $A \models \neg \varphi$ jos ja vain jos $A \not \models \varphi$.
\item $A \models (\varphi \land \psi)$ jos ja vain jos $A \models \varphi$ ja $A \models \psi$.
\item $A \models (\varphi \lor \psi)$ jos ja vain jos $A \models \varphi$ tai $A \models \psi$.
\item $A \models (\varphi \to \psi)$ jos ja vain jos $A \not \models \varphi$ tai $A \models \psi$.
\item $A \models (\varphi \leftrightarrow \psi)$ jos ja vain jos $A \models \varphi$ ja $A \models \psi$ tai $A \not \models \varphi$ ja $A \not \models \psi$.
\item $A \models \forall x(\varphi)$ jos ja vain jos jokaisella mallin $A$ alkiolla $a
$ pätee $A \models \varphi$ kun muuttaja $x$ tulkitaan $a$:ksi.
\item $A \models \exists x(\varphi)$ jos ja vain jos löytyy jokin mallin $A$ alkio $a$ jolla $A \models \varphi$ kun muuttuja $x$ tulkitaan $a$:ksi.
\end{itemize}
\end{maar}

\subsection{Elementaarinen ekvivalenssi}
Siinä missä isomorfismi kuvailee kahden mallin rakenteellista samanlaisuutta, niin elementaarinen ekvivalenssi puolestaan vertailee malleja suhteessa käytettyyn kieleen.

\begin{maar}[Elementaarinen ekvivalenssi]
Olkoon $L$ aakkosto joka muodostaa kielen $K$. Olkoon $A$ ja $B$ kummatkin $L$-malleja. $A$:ta ja $B$:tä sanotaan \textit{elementaarisesti ekvivalenteiksi}, jos kaikilla lauseilla $S \in K$ pätee $A \vDash S \Longleftrightarrow B \models S$. Tätä merkitään $A \equiv B$
\end{maar}

\begin{kor}
Jos $L$-mallit $A$ ja $B$ ovat isomorfiset, niin ne ovat elementaarisesti ekvivalentit.
\end{kor}

On huomattava, että tämä ei päde toisinpäin. Mallien $A$ ja $B$ välinen elementaarinen ekvivalenssi ei kerro mitään mallien isomorfisuudesta. 

\section{EF-peli}
\begin{huom}
Jatkossa aakkostolla tarkoitetaan aina relationaalista aakkostoa, ellei toisin mainita.
\end{huom}

Tässä kappaleessa esitellään EF-peli, sen säännöt, strategian ja voittavan strategian käsitteet, joissa seuraan pitkälti Jouko Väänästä \cite{Vaa11} ja havainnollistetaan EF-peliä esimerkillä kahdelle verkolle.

EF-pelissä ideana on, että peli on kahdelle pelaajalle, joita kutsutaan nimillä Pelaaja I ja Pelaaja II. Peliä pelataan kahdella mallilla $A$ ja $B$, joilla on sama aakkosto. Pelaaja II haluaa osoittaa, että kyseiset mallit ovat jossain määrin samankaltaiset, kun taas Pelaaja I haluaa osoittaa, että mallit ovat erilaiset. Pelissä on äärellinen määrä vuoroja ja vuorojen määrä on alussa sovittu.

\subsection{Pelin kulku}
Pelin kulku kuvataan kirjallisuudessa lähes aina samalla tavalla. Määritellään aluksi mielivaltaisen kierroksen kulku ja kummankin pelaajan voittokriteerit.

\begin{maar}[Kierroksen kulku]
Merkitään pelattavien kierrosten määrää luvulla $k \in \mathbb{Z}_+$. EF-peliä pituudeltaan $k$-kierrosta malleilla $A$ ja $B$ merkitään $EF_k(A, B)$. Pelin $EF_k(A, B)$ mielivaltaisen kierroksen $i \in \{1, \ldots, k\}$ kulku on seuraavanlainen: 
\begin{itemize}
\item Ensin Pelaaja I valitsee toisen malleista $A$ tai $B$ sekä jonkin alkion $a_i \in A$ tai $b_i \in B$ tästä mallista.
\item Tämän jälkeen Pelaaja II valitsee malleista sen, jota Pelaaja I ei valinnut ja valitsee tästä mallista jonkin alkion.
\end{itemize}
\end{maar}

\begin{maar}[Voittokriteeri]
Olkoon $a = (a_1, \ldots, a_i)$ mallista $A$ valitut alkiot ja $b = (b_1, \ldots, b_i)$ mallista $B$ valitut alkiot mielivaltaisella kierroksella $i$. Pelaajan II voittaa jos ja vain jos jokaisella kierroksella $i \leq n$ pari $(a, b)$ määrää osittaisen isomorfismin $A \rightarrow B$ eli on olemassa kuvaus $h: A \rightarrow B$, siten että $a \in A \mapsto b \in B$ Muussa tapauksessa Pelaaja I voittaa.
\end{maar}

\textit{Strategia} on joukko sääntöjä, joiden mukaan pelaaja tekee valintansa toisen pelaajan valinnasta riippuen. EF-pelissä kummallakin pelaajalla on koko ajan tiedossa mallit, niiden rakenne ja jo tehdyt valinnat, eli peli on \textit{täydellisen informaation peli}. Strategiaa, jota seuraamalla pelaaja voittaa pelin riippumatta mitä valintoja toinen pelajaa tekee kutsutaan \textit{voittavaksi strategiaksi}. Jos Pelaaja II:lla on voittava strategia EF-pelissä $EF_k(A, B)$, niin tätä merkitään $A \sim_k B$.

\begin{lau} 
Relaatio $\sim_k$ on $L$-mallien ekvivalenssirelaatio.
\end{lau}
\begin{tod} Todistus on Jouko Väänäsen kirjassa \cite{Vaa11} esiintyvää todistusta mukaileva. Oletetaan, että $A, B$ ja $C$ ovat kaikki saman aakkoston $L$-malleja. Tällöin
\begin{itemize}
\item Refleksiivisyys: $A \sim_k A$.\\
Voittava strategia Pelaajalle II on valita aina sama alkio minkä Pelaaja I valitsi. Täten $\sim_k$ on refleksiivinen.
\item Symmetrisyys: $A \sim_k B \iff B \sim_k A$.\\
EF-pelin määritelmä ei millään tavoin tee eroa pelien $EF_k(A, B)$:n ja $EF_k(B, A)$:n välillä. Täten jos $A \sim_k B$, niin Pelaaja II voi käyttää samaa voittostrategiaa myös pelissä $EF_k(B, A)$. Jos taas $B \sim_k A$, niin Pelaaja II voi käyttää samaa voittostrategiaa pelissä $EF_k(A, B)$. Siis $\sim_k$ on symmetrinen.
\item Transitiivisuus: $A \sim_k C \land B \sim_k C \implies A \sim_k C$.\\
Todistetaan väite käsittelemällä kaikki väitteen ja implikaation pelit samaan aikaan. Peli $EF_k(A, C)$ pelataan siten, että Pelaaja II tekee valintansa pelaamalla samaan aikaa kuvitteellisia pelejä $EF_k(A, B)$ ja $EF_k(B, C)$. Oletetaan, että peli $EF_k(A, C)$ alkaa Pelaajan II valinnalla $a_1 \in A$, jolloin Pelaaja II valitsee seuraavalla strategialla:

Pelaaja II kuvittelee, että Pelaaja I valitsi alkion $a_1 \in A$ pelissä $EF_k(A, B)$, jolloin hän valitsee alkion $b_1 \in B$ pelin $EF_k(A, B)$ voittostrategian mukaisesti. Seuraavaksi Pelaaja II kuvittelee, että äskeinen valinta oli Pelaajan I valinta pelissä $EF_k(B, C)$ ja valitsee alkion $c_1 \in C$ pelin $EF_k(B, C)$ voittostrategian mukaisesti. Tämä valinta $c_1$ on Pelaajan II vastaus Pelaajan I valintaan $a_1$ pelissä $EF_k(A, C)$.

Jos Pelaaja I valitseekin alkion $c_1 \in C$, niin Pelaaja II yksinkertaisesti seuraa strategiaa toiseen suuntaan. Näin voidaan toimia, koska äsken todistimme, että voittavat strategiat ovat symmetrisiä.

Kun peliä on pelattu $k$-kierrosta, niin meillä on valinnoista muodostuneet jonot $a_1, \ldots, a_k$, $b1, \ldots, b_k$ ja $c_1, \ldots, c_k$. Oletusten nojalla on olemassa osittaisisomorfismit $f: A \cong_p B$ ja $g: B \cong_p C$. Nyt voidaan muodostaa yhdistetty kuvaus $h(f(a_i)) = g(a_i)$, siten että $a_i \mapsto c_i$ on osittaisisomorfismi, kaikilla $i \in \{1, \ldots, k\}$. Täten $A \sim_k C$, siis relaatio $\sim_k$ on transitiivinen.
\end{itemize}
Koska relaatio $\sim_k$ on refleksiivinen, symmetrinen ja transitiivinen, niin se on tällöin ekvivalenssirelaatio.
\end{tod}
\\

Kuten aikaisemmin todettiin, EF-pelistä on kehitetty monia erilaisia variaatioita, kuten esimerkiksi EF-peli verkoille (verkoilla voidaan esittää ensimmäisen kertaluokan predikaattilogiikan kaavoja. Verkon kaarethan ovat käytännössä relaatioita verkon pisteiden välillä). Havainnollistetaan nyt EF-pelin ideaa yksinkertaisella esimerkillä kahden kierroksen EF-pelillä verkoille $X$ ja $Y$, sekä esitetään samalla strategia $X \sim_k Y$, eli voittava strategia Pelaajalle II.

\begin{esim}
Tässä EF-pelissä verkoille ideana on, että rakennetaan pelaajien tekemistä valinnoista kahta uutta verkkoa $A$ ja $B$, siten että verkosta $X$ valittu solmu merkitään verkon $A$ solmuksi $a_i$ ja verkosta $Y$ valittu solmu verkon $B$ solmuksi $b_i$, jossa $i$ ilmaisee millä kierroksella valinta on tapahtunut. Uudet verkot $A$ ja $B$ rakennetaan helpottamaan tehtyjen valintojen ja näiden relaatioiden muodostaman kokonaisuuden hahmottamista ja hallintaa.

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =4 cm and 5cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] (x_1) {$x_1$};
\node[state] (x_2) [above =of x_1] {$x_2$};
\node[state] (y_2) [above right =of x_1] {$y_2$};
\node[state] (y_1) [right =of x_1] {$y_1$};
\node[state] (y_3) [right =of y_1] {$y_3$};
\path (x_1) edge (x_2);
\path (x_2) edge (x_1);
\path (y_1) edge (y_2);
\path (y_2) edge (y_1);
\path (y_3) edge (y_1);
\path (y_1) edge (y_3);
\path (y_2) edge (y_3);
\path (y_3) edge (y_2);
\node[align=left, below] at (0.1,-.9)%
{Verkko \textit{X}};
\node[align=right, below] at (7.5,-.9)%
{Verkko \textit{Y}};
\end{tikzpicture}
\end{center}


Kierros 1:
\begin{itemize}
  \item Pelaaja I voi valita solmun kummasta verkosta tahansa.
  \item Jos Pelaaja I valitsee solmun verkosta $X$, Pelaaja II valitsee vastinpariksi verkosta $Y$ solmun $y_1$, muulloin Pelaaja II valitsee vastinpariksi solmun $x_1$.
  \item Oletetaan, että Pelaaja I valitsee solmun $x_2$. Tällöin meillä on $a_1 \coloneqq x_2, b_1 \coloneqq y_1$ ensimmäisen kierroksen jälkeen.
\end{itemize}

Kierros 2:
\begin{itemize}
  \item Minkä tahansa solmun Pelaaja I valitseekin, Pelaaja II voi peilata valinnan. Oletetaan, että tällä kertaa Pelaaja I valitsee verkosta $Y$.
  \item Jos Pelaaja I valitsee solmun $y_1$, eli saman solmun kuin $b_1 = y_1$, on Pelaajan II valittava vastinpariksi Pelaajan I ensimmäisen kierroksen valinta $x_2$.
  \item Jos Pelaaja I taas valitsee solmun $y_2$ tai $y_3$, eli jommankumman solmun $b_1 = y_1$ naapureista, Pelaajan II täytyy valita vastinpariksi solmun $a_1 = x_2$ naapuri.
  \item Toisen kierroksen jälkeen tilanne on $a_2 \coloneqq x_2, b_2 \coloneqq y_1$ tai $a_2 \coloneqq x_1, b_2 \coloneqq y_2/y_3$.
  \item Pelaaja II voittaa, koska kuvaus $f$ verkolta $A$ verkolle $B$, $f(a_i) = b_i, i = 1, 2$ säilyttää naapuruussuhteet, eli $f$ on osittaisisomorfismi.
\end{itemize}

Jos Pelaaja I olisi tehnyt toisellakin kierroksella valintansa verkosta $X$:
\begin{itemize}
\item Jos Pelaaja I valitsee solmun $x_1$, niin Pelaaja II valitsee solmun $y_1$.
\item Jos Pelaaja I taas valitsee solmun $x_2$, niin Pelaaja II valitsee solmun $y_2$.
\item Tällöin toisen kierroksen jälkeen tilanne olisi ollut $a_2 \coloneqq x_1, b_2 \coloneqq y_1$ tai $a_2 \coloneqq x_2, b_2 \coloneqq y_2$.
\item Pelaaja II voittaa tässäkin skenaariossa, koska kuvaus $f$ verkolta $A$ verkolle $B$, $f(a_i) = b_i, i = 1, 2$ säilyttää naapuruussuhteet, eli $f$ on osittaisisomorfismi.
\end{itemize}
\end{esim}

\subsection{EF-pelin ominaisuuksia}


\section{Sovelluksia}
EF-peli on teoreettisen tietojenkäsittelyn ja äärellisten mallien teorian työkalu jota pääasiassa käytetään määriteltävyyskysymyksiin ja todistusten apuna. Äärellisten mallien teoriaa ja sen menetelmää EF-peliä voidaan soveltaa tietojenkäsittelytieteessä muun muassa verifikoinnissa.

\subsection{Sovellusaloja}
Äärelliset mallit voidaan koodata verkkoina, puina tai merkkijonoina. Tällöin niitä voidaan käyttää laskennan olioina ja siten niillä voidaan kuvata äärellistilallisia systeemejä ja tutkia näiden toiminnan oikeellisuutta. 

Yksi sovellusala on tietokantateoria, koska relationaalinen malli samaistaa tietokannan äärellisen relaationaalisen struktuurin kanssa. Formaalin kielen kaavat voidaan siis ajatella ohjelmina, jotta niiden merkitystä struktuurissa voidaan arvioida. Ja toisinpäin, voidaan esittää jonkin laskennallisen vaativuusluokan kyselyitä jollakin formaalilla kielellä.

Muita tietojenkäsittelytieteen osa-alueita joihin EF-peliä voi soveltaa on esimerkiksi vaativuusteoria, koska äärelliset mallit tarjoavat laskennan vaativuusluokkien loogisen karakterisoinnin ja mahdollistavat vaativuusteoreettisten tulosten todistamisen tätä kautta. Esimerkiksi $P = NP$ -ongelma redusoituu kysymykseksi: onko kahdella kiintopistelogiikalla sama ilmaisuvoima äärellisissä malleissa? Määriteltävyystulosten todistuksissa seuraava teoreema on keskeinen:

\begin{lau}[Metodologia teoreema]
Ei ole olemassa ensimmäisen kertaluvun predikaattilogiikan lausetta joka ilmaisee ominaisuuden $P$, jos ja vain jos, kaikilla $n \in \mathbb{Z}_+$, on olemassa mallit $A$ ja $B$, joille pätee:
\begin{itemize}
\item Ominaisuus $P$ on totta $A$:ssä.
\item Ominaisuus $P$ on epätotta $B$:ssä.
\item $A \sim_n B$, eli Pelaaja II voittaa $n$-kierroksisen EF-pelin $A$:lla ja $B$:llä.
\end{itemize}
\end{lau}

Esitetään yksinkertainen relaatioalgebran ongelma esimerkkinä siitä miten metodologia teoreemaa käytetään määärittelemättömyystuloksia todistettaessa. Tässä esimerkissä käytämme Boolen kyselyä, joten ensimmäiseksi määrittelemme tämä tarkasti.

\begin{maar}[Boolen kysely]
Olkoon $M$ malli. Tällöin \textit{Boolen kysely} $Q$ on kuvaus $Q: M \to \{0, 1\}$ joka säilyy isomorfismeissa. Siis jos $A \cong B$, niin $Q(A) = Q(B)$
\end{maar}

\begin{esim}
Olkoon $A$ malli, joka sisältää vain vakioita. Tutkitaan Boolen kyselyä: onko $A$:ssa parillinen määrä alkioita? Konstruoidaan mallit $A$ ja $B$ todistusta varten seuraavanlaisiksi: $A_n \coloneqq \{a_1, \ldots, a_n\}$ ja $B_n \coloneqq \{b_1, \ldots, b_{n + 1}\}$, mielivaltaisella $n \in \mathbb{Z}_+$. Eli toisessa mallissa on yksi alkio enemmän kuin toisessa. Täten toinen malleista sisältää parittoman määrän alkioita ja toinen parillisen määrän alkioita.

Voittostrategia Pelaajalle II on sellainen, että jos Pelaaja I valitsee mielivaltaisella kierroksella $i$ alkion $a_i$, niin Pelaaja II yksinkertaisesti valitsee alkion $b_i$. Eli $A \sim_n B$ ja koska toisessa mallissa on parillinen ja toisessa pariton määrä alkioita, niin ominaisuus ``parillinen määrä alkioita'' on totta toisessa mallissa ja epätotta toisessa. Täten metodologia teoreeman nojalla Boolen kysely onko mallissa $A$ parillinen määrä alkioita ei ole määriteltävissä ensimmäisen kertaluvun predikaattilogiikan lauseeksi, eikä siten myöskään relaatioalgebran kyselyksi.
\end{esim}

Edellinen esimerkki toimii suoraan verkoille, kunhan käsittää mallit $A$ ja $B$ verkoiksi ja alkiot verkon solmuiksi siten, että $a_i$:sta on kaari $a_{i + 1}$:ssaan ja niin edelleen, sekä vastavuoroisesti $B$:n samalla tavalla. Eli verkoille ei ole olemassa ensimmäisen kertaluokan predikaattilogiikan lausetta jolla voisi esittää ominaisuuden, että verkko sisältää parillisen määrän solmuja.

\subsection{Ensimmäisen kertaluokan predikaattilogiikan rajoitteet}
Verkoilla on paljon ominaisuuksia jotka eivät ole ensimmäisen kertaluokan predikaattilogiikka määriteltäviä. Jos $G$ on äärellisten verkkojen luokka, niin esimerkiksi seuraavat kyselyt eivät ole ensimmäisen kertaluokan predikaattilogiikka määriteltävissä $G$:lle: transitiivinen sulkeuma, tasoverkkoisuus, Eulerilaisuus, Hamiltonilaisuus, $k$-värittyvyys, kaikilla $ k \geq 2$, asyklisyys, leikkaussolmu ja verkon yhtenäisyys.

Todistetaan esimerkin vuoksi näistä epäsuorasti verkon yhtenäisyyden määrittelemättömyys.
\begin{esim}
Oletetaan että ensimmäisen kertaluokan predikaattilogiikan lause $\varphi$ määrittelee verkkojen yhtenäisyyden aakkostossa joka muodostuu binaarisesta relaatiosymbolista $E$. Olkoon $L$ jokin lineaarijärjestys. Muodostestaan lineaarijärjestyksestä $L$ suunnattu verkko $G$ seuraavanlaisesti: Määritellään seuraajarelaatio $S$ lineaarijärjestyksestä $L$ seuraavasti: \[S(x, y) \coloneqq (x < y) \land \forall z ((z \leq x) \lor (y \leq z))\]
Määritellään että ensimmäisen kertaluokan predikaattilogiikan kaava $\psi(x, y)$ siten että $\psi(x, y)$ on toteutuva jos ja vain jos jokin seuraavista on totta:
\begin{itemize}
\item $\exists z (S(x, z) \land S(z, y)$, toisin sanoen $y$ on $x$:n seuraajan seuraaja.
\item $\forall u (y \leq u) \land (\exists z(S(x, z) \land \forall u(u \leq z)))$, toisin sanoen $x$ on viimeisen alkion edeltäjä ja $y$ on ensimmäinen alkio.
\item $\forall u (u \leq x) \land (\exists z(S(z, y) \land \forall u(z \leq u)))$, toisin sanoen $x$ on viimeinen alkio ja $y$ on ensimmäisen alkion seuraaja.
\end{itemize}
Ensimmäisen kertaluokan predikaattilogiikan kaavan $\psi$ määräämä suunnattu verkko $G$ lineaarijärjestyksen $L$ alkioista on yhtenäinen, tarkemmin sanoen se muodostuu yhdestä syklistä, jos sen solmujen määrä on pariton. Seuraavat kaksi kuvaa havainnolistavat tätä:

\begin{huom}
Verkot on numeroitu vain havainnollistamisen helpottamiseksi.
\end{huom}

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =2 cm and 2cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] (x_1) {1};
\node[state] (x_2) [right =of x_1] {2};
\node[state] (x_3) [right =of x_2] {3};
\node[state] (x_4) [right =of x_3] {4};
\node[state] (x_5) [right =of x_4] {5};
\path (x_1) edge [bend left] node [right] {} (x_3);
\path (x_3) edge [bend left] node [right] {} (x_5);
\path (x_5) edge [bend left] node [left]  {} (x_2);
\path (x_2) edge [bend left] node [right] {} (x_4);
\path (x_4) edge [bend left] node [left] {} (x_1);
\node[align=center, below] at (4.0,-1.3)%
{Verkko $G$ jossa on pariton määrä solmuja (lineaarijärjestystä korostaen)};
\end{tikzpicture}
\end{center}

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =2 cm and 2cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] at (4.0, 0) (x_1) {1};
\node[state] (x_2) [below left =of x_1] {2};
\node[state] (x_3) [right =of x_1] {3};
\node[state] (x_4) [left =of x_1] {4};
\node[state] (x_5) [below =of x_3] {5};
\path (x_1) edge (x_3);
\path (x_3) edge (x_5);
\path (x_5) edge (x_2);
\path (x_2) edge (x_4);
\path (x_4) edge (x_1);
\node[align=center, below] at (4.0,-2.6)%
{Verkko $G$ jossa on pariton määrä solmuja (syklisyyttä korostaen)};
\end{tikzpicture}
\end{center}

Jos solmujen määrä on parillinen niin verkko ei ole yhtenäinen, tarkemmin sanoen se koostuu kahdesta erillisestä syklistä. Havainnollistetaan tätä kahdella kuvalla:

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =2 cm and 2cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] (x_1) {};
\node[state] (x_2) [right =of x_1] {};
\node[state] (x_3) [right =of x_2] {};
\node[state] (x_4) [right =of x_3] {};
\node[state] (x_5) [right =of x_4] {};
\node[state] (x_6) [right =of x_5] {};
\path (x_1) edge [bend left] node [right] {} (x_3);
\path (x_3) edge [bend left] node [right] {} (x_5);
\path (x_5) edge [bend left] node [left]  {} (x_1);
\path (x_2) edge [bend left] node [right] {} (x_4);
\path (x_4) edge [bend left] node [right] {} (x_6);
\path (x_6) edge [bend left] node [left] {} (x_2);
\node[align=center, below] at (5.0,-1.6)%
{Verkko $G$ jossa on parillinen määrä solmuja (lineaarijärjestystä korostaen)};
\end{tikzpicture}
\end{center}

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =2 cm and 2cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] at (1.0, 0) (x_1) {};
\node[state] at (7.0, 0) (x_2) {};
\node[state] (x_3) [below right =of x_1] {};
\node[state] (x_4) [below right =of x_2] {};
\node[state] (x_5) [below left =of x_1] {};
\node[state] (x_6) [below left =of x_2] {};
\path (x_1) edge (x_3);
\path (x_3) edge (x_5);
\path (x_5) edge (x_1);
\path (x_2) edge (x_4);
\path (x_4) edge (x_6);
\path (x_6) edge (x_2);
\node[align=center, below] at (4.0,-2.6)%
{Verkko $G$ jossa on parillinen määrä solmuja (syklisyyttä korostaen)};
\end{tikzpicture}
\end{center}

Sijoittamalla kaavan $\psi$ relaatiosymbolin $E$ ilmentymien tilalle lauseessa $\neg \varphi$ voidaan nyt testata verkon $G$ parillisuutta. Edellisen esimerkin Boolen kyselyn ja sen yleistämisen verkoille perusteella tiedetään, ettei kyseinen testaus ole mahdollista, joten päädymme ristiriitaan. Täten ei ole olemassa ensimmäisen kertaluokan predikaattilogiikan lausetta $\varphi$ joka määrittelisi verkkojen yhtenäisyyden.
\end{esim}

Näiden lisäksi on hyvin monia muitakin verkkojen ominaisuuksia, joita ensimmäisen kertaluokan predikaattilogiikka ei pysty ilmaisemaan. Itse asiassa on osoitettu, että ensimmäisen kertaluokan predikaattilogiikka kykenee ilmaisemaan vain verkkojen lokaaleja ominaisuuksia \cite{Han65}. Hanf käytti tässä todistuksessaan EF-peliä, tarkemmin Fraïssén algebrallista versiota siitä. Sama lokaalisuus on osoitettu myöhemmin myös toisella metodilla, kvanttorien eliminoinnilla \cite{Gai82}. Nämä tulokset ovat motivoineet pyrkimyksiä kehittää ensimmäisen kertaluokan predikaattilogiikan laajennuksia verkoille, samoin kuin kehittämään näille omia EF-pelejä ilmaisuvoiman mittaamiseen. Tällaisia mittauksia on tehty muun muassa monadiselle toisen kertaluokan predikaattilogiikalle \cite{Fag75} \cite{Fag93}, transitiivisen sulkeuman logiikalle \cite{Gra92} ja erilaisille kiintopistelogiikoille \cite{Bos93}.

Vaikka ensimmäisen kertaluokan logiikka on hyvin rajoittunut kieli esimerkiksi verkkojen ominaisuuksien ilmaisemiseen, niin kuitenkin sillä voi joitain hyödyllisiäkin kyselyitä verkkojen suhteen ilmaista. Esimerkiksi seuraavat lauseet ovat ilmaistavissa ensimmäisen kertaluokan predikaattilogiikalla (oletetaan, että $E$ on relaatio joka ilmaisee verkon solmujen välistä kaarta ja symbolit $x, y, z_i$ ovat solmuja):

\begin{itemize}
\item ``solmulla $x$ on vähintään kaksi toisistaan eroavaa naapuria'' \[(\exists y)(\exists z)(\neg(y = z)\land E(x, y) \land E(x, z))\]
\item ``jokaisella solmulla $x$ on vähintään kaksi toisistaan eroavaa naapuria'' \[(\forall x)(\exists y)(\exists z)(\neg(y = z)\land E(x, y) \land E(x, z))\]
\item ``on olemassa polku solmusta $x$ solmuun $y$ jonka pituus on $3$'' \[(\exists z_1)(\exists z_2)(E(x, z_1)\land E(z_1, z_2) \land E(z_2, y))\]
\end{itemize}

Verkkojen ohella EF-pelit ovat olleet hyödyllisiä ensimmäisen kertaluokan predikaattilogiikan ja formaalien kielten teorian määriteltävyyskysymysten välisen suhteen tutkimisessa. Erityisesti tähtivapaat säännölliset kielet (star-free regular languages) ovat olleet mielenkiinnon kohteena.

\subsection{Kongruenssiapulauseet}
Kieltä kutsutaan tähtivapaaaksi, jos sen pystyy kuvailemaan säännöllisenä lausekkeena joka on konstruoitu aakkoston symboleista, tyhjän joukon symbolista ja kaikista muista loogisista operaatioista, kuten konkatenaatiosta ja komplementista paitsi Kleenen tähdestä. Hyvin tunnettu tulos formaalien kielten teoriassa on, että kieli on ensimmäinen kertaluokka predikaattilogiikkamääriteltävä jos ja vain jos se on tähtivapaa \cite{McN71}. Tämän todistuksessa käytetään yleensä induktiota kvanttorisyvyyden suhteen kuten esimerkiksi Ladner tekee \cite{Lad77}.

\begin{maar}[Kvanttoriaste]
Ensimmäisen kertaluokan predikaattilogiikan kaavan $\varphi$ \textit{kvanttoriaste} $qr(\varphi)$ on sisäkkäisten kvanttorien syvyys ja se määritellään seuraavasti:
\begin{itemize}
\item Jos $\varphi$ on atomikaava, niin $qr(\varphi) = 0$.
\item $qr(\neg \varphi) = qr(\varphi)$.
\item $qr(\varphi_1 \land \varphi_2) = qr(\varphi_1 \lor \varphi_2) = max\{qr(\varphi_1, qr(\varphi_2)\}$
\item $qr(\forall x \varphi) = qr(\exists x \varphi) = qr(\varphi) + 1$.
\end{itemize}
\end{maar}

Tähtivapaan kielen ja kielen ensimmäisen kertaluokkalogiikan määriteltävyyden välisen loogisen ekvivalenssin todistuksen induktioaskeleen kriittinen kohta on seuraava väite:

\begin{lem}[Kongruenssilemma]
Olkoon $s, s', t, t'$ sanoja yli aakkoston $\Sigma$ ja olkoon $S, S', T , T'$ näitä kuvailevia malleja. Tällöin: \[ S \cong_m S' \land T \cong_m T' \Longrightarrow S \cdot T \cong_m S' \cdot T' \]
\end{lem}

Lemman todistus on EF-peliä käyttämällä hyvin suoraviivainen. Oletuksen nojalla Pelaajalla II on voittostrategia peleissä $EF_m(S, S')$ ja $EF_m(T, T')$. Pelaajan II voittostrategia pelille $EF_m(S \cdot T, S' \cdot T')$ on kompositio kummastakin oletuksen voittostrategiasta. Siis osille $S$ ja $S'$ käytetään ensimmäisen pelin voittostrategiaa ja osille $T$ ja $T'$ toisen pelin voittostrategiaa.

Kongruenssilemma sanoo, että mallin ominaisuudet määräytyvät osiensa ominaisuuksien mukaan. Täten mallit voidaan myös rakentaa osista ja näiden ominaisuuksista. Kongruenssilemmat ovat tyypillisiä EF-pelien sovelluksia. Näitä on todistettu monille muille logiikoilla sekä sanoja monimutkaisemmille malleille. Esimerkiksi Shelah esittelee esimerkkejä monadisen logiikan kongruenssilemmoista lineaarijärjestyksille \cite{She75}. Thomas käyttää EF-pelejä todistaakseen kongruenssilemman ensimmäisen kertaluokan predikaattilogiikan muunnokselle jossa kaavat ovat prenex-normaalimuodossa ja kvanttorit määrätynlaisessa prefiksimuodossa \cite{Tho84}, sekä tähtivapaille säännöllisille lausekkeille \cite{Tho87}.

Predikaattilogiikan ja tähtivapaiden lausekkeiden ekvivalenssi on hyvin tunnettu. Thomas ja Lippert esittelevät tähtivapaiden säännöllisten lausekkeiden joissa ylimääräinen vakio kiinnitetään johonkin kieleen, eli relativoidut tähtivapaat lausekkeet (relativized star-free expressions) ja ensimmäisen kertaluokan predikaattilogiikan eroja EF-pelin muunnoksen, konkatenaatiopelin, avulla. Tässä työssään he näyttävät että relativoidut tähtivapaat lausekkeet ovat heikompia kuin vastaavat ensimmäisen kertaluokan predikaattilogiikan lauseet. \cite{Lip88}

\subsection{Bisimulaatio}
Yksi tärkeä malliteoreettisten pelien sovellus automaattien ja tilasiirtymäsysteemien teoriassa on Parkin esittelemä \textit{bisimulaation} käsite \cite{Par81}. Bisimulaatiota voi tarkastella eräänlaisena osittaisisomorfismien ``perheenä'', joka vastaa rajoitettua EF-peliä, jossa osittaisisomorfismia on heikennetty niin että kuvauksen ei tarvitse olla enää injektiivinen. Vaikka klassisen, tässä tutkielmassa määritellyn, EF-pelin ja bisimulaation välillä on hyvin läheinen kytkös, niin ne on kehitetty kuitenkin hyvin pitkälti erillään toisistaan. Bisimulaatiota käytetään esimerkiksi Hennessyn ja Milnerin modaalilogiikassa \cite{Hen80}. 

\textit{Hennessy-Milner modaalilogiikkaa} käytetään tilasiirtymäsysteemien omaisuuksien määrittelyyn. Tilasiirtymäsysteemit ovat hyvin paljon automaatteja muistuttavia struktuureja. Määritellään seuraavaksi bisimulaatio.

\begin{maar}[Bisimulaatio]
Olkoon $M$ ja $M'$ malleja, jotka koostuvat solmujen (tilojen) joukosta $W$, solmujen välisestä Relaatiosta (kaarista) $R$ ja funktiosta $V$, joka liittää jokaiseen propositiosymboliin $p_i$ joukon $W$ osajoukon $V(p_i)$. Intuitiivisesti ajatellen joukko $V(p_i)$ on niiden tilojen joukko, jossa $p_i$ on tosi. \textit{Bisimulaatio} mallien $M$ ja $M'$ välillä on epätyhjä relaatio $B \subseteq W \times W'$, jolle pätee kaikilla $(w, w') \in B$ seuraavat ehdot:
\begin{itemize}
\item Tilat $w$ ja $w'$ toteuttavat samat propositiosymbolit.
\item Jos $(w, v) \in R$, niin on olemassa $v' \in W'$, jolle pätee $(w', v') \in R'$ ja $(v, v') \in B$.
\item Jos $(w', v') \in R'$, niin on olemassa $v \in W$, jolle pätee $(w, v) \in R$ ja $(v, v') \in B$.
\end{itemize}
Jos on olemassa jokin bisimulaatio $B$ mallien $M$ ja $M'$ välillä ja $(w, w') \in B$ niin sanotaan, että tilat ovat bisimilaarisia.
\end{maar}

Kaksi tilaa ovat siis bisimilaarisia, jos ja vain jos niiden toteuttamat propositiosymbolit sekä tilojen mahdolliset tilasiirtymät vastaavat toisiaan. Seuraava kuva havainnollistaa tilojen bisimilaarisuutta:

\begin{center}
\begin{tikzpicture}[-latex ,auto ,node distance =2 cm and 2cm ,on grid ,
semithick ,
state/.style ={ circle ,top color =white , bottom color = processblue!20 ,
draw,processblue , text=blue , minimum width =1 cm}]
\node[state] (x_1) {$w_1 | p_0$};
\node[state] (x_2) [right =of x_1] {$v_1 | p_1$};
\node[state] (x_3) [right =of x_2] {$w_2 | p_0$};
\node[state] (x_4) [right =of x_3] {$v_2 | p_1$};
\node(M) [left =of x_1]%
{$M$};
\node(M') [below =of M]%
{$M'$};
\node[state] (x_5) [below =of x_2] {$w | p_0$};
\node[state] (x_6) [below =of x_3] {$v | p_1$};
\path (x_1) edge node [right] {} (x_2);
\path (x_2) edge node [right] {} (x_3);
\path (x_3) edge node [right] {} (x_4);
\path (x_5) edge [bend left] node [right] {} (x_6);
\path (x_6) edge [bend left] node [left] {} (x_5);
\draw[gray,thin,dashed] (x_1) -- (x_5);
\draw[gray,thin,dashed] (x_3) -- (x_5);
\draw[gray,thin,dashed] (x_2) -- (x_6);
\draw[gray,thin,dashed] (x_4) -- (x_6);
\node[align=center, below] at (2.0,-3.0)%
{Bisimilaariset tilat on yhdistetty katkonuolilla};
\end{tikzpicture}
\end{center}

Bisimulaation käsite mahdollistaa sen tutkimisen että mitä mallien ominaisuuksia on mahdollista kuvailla modaalilogiikan avulla ja mitä taas ei ole mahdollista kuvailla. Bisimulaatio on yksi modaalilogiikan tärkeimpiä työkaluja ja sopii mainiosta ohjelmien verifiointiin. Se onkin yksi verifioinnin ja samanaikaisuusteorian kulmakivistä. Sille löytyy myös käyttöä tekoälytutkimuksessa, lingvistiikassa ja filosofiassa.

\section{Yhteenveto}
Tässä tutkielmassa on tarkasteltu Ehrenfeucht--Fraïssé-pelejä ja näiden sovelluksia eri näkökulmista. Teoreettiselta kannalta tutkielmassa esiteltiin EF-peli, sen säännöt ja esiteltiin esimerkin avulla miten EF-peliä käytännössä pelataan. Lisäksi todistettiin, että Pelaajan II voittostrategia on ekvivalenssirelaatio joten voittostrategian avulla voidaan jakaa malleja ekvivalenssiluokkiin ja täten tarvittaessa samaistaa nämä mallit yhdeksi malliksi. Käytännön kannalta tutkielmassa on esimerkkien avulla esitelty miten EF-peliä sovelletaan määriteltävyyskysymyksissä ja todistuksissa. Kirjallisuutta ja tutkimuksia on esitelty syvällistä aiheeseen tutustumista helpottamaan.

Tutkielmassa esiteltiin myös laajalti EF-peleihin liittyvää matemaattista peruskäsitteistöä, kuten kielet ja mallit sekä isomorfismi ja totuus predikaattilogiikassa. Lisäksi aivan aluksi luotiin pikainen katsaus EF-pelien historiaan ja syihin miksi EF-pelit ovat äärellisten mallien teoriassa niin keskeisessä osassa.



% Write some science here.

% Esimerkkilause ja lähdeviite~\cite{esimerkki}.
 
\newpage
% --- References ---
%
% bibtex is used to generate the bibliography. The babplain style
% will generate numeric references (e.g. [1]) appropriate for theoretical
% computer science. If you need alphanumeric references (e.g [Tur90]), use
%
%\bibliographystyle{babalpha-lf}
%
% instead.

\bibliographystyle{babplain-lf}
\bibliography{references-fi}


% --- Appendices ---

% uncomment the following

% \newpage
% \appendix
% 
% \section{Esimerkkiliite}

\end{document}
